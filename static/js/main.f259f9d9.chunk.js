(this["webpackJsonpmany-worlds"]=this["webpackJsonpmany-worlds"]||[]).push([[0],{10:function(t,n,e){"use strict";e.r(n);var a=e(0),i=e.n(a),r=e(6),o=e(2),s=e(3),c=e(1),h=e(4),u=e.n(h);function l(){return f.apply(this,arguments)}function f(){return(f=Object(c.a)(i.a.mark((function t(){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n={audio:!0,videol:!1},!navigator.mediaDevices.getUserMedia){t.next=6;break}return console.log("Using navigator.mediaDevices"),t.abrupt("return",navigator.mediaDevices.getUserMedia(n));case 6:if(!navigator.webkitGetUserMedia&&!navigator.getUserMedia){t.next=9;break}return navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia,t.abrupt("return",new Promise((function(t,e){navigator.getUserMedia(n,t,e)})));case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var g,d=e(5),m=e.n(d);function v(){return v.stats||(v.stats=new m.a),v.stats}var p=function(t){var n=v();t&&!g?(document.body.appendChild(n.dom),n.dom.style.right=0,n.dom.style.left=null,g=requestAnimationFrame((function t(){n.update(),g=requestAnimationFrame(t)}))):!t&&g&&(cancelAnimationFrame(g),g=void 0,document.body.removeChild(n.dom))};e(9),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function w(){return y.apply(this,arguments)}function y(){return(y=Object(c.a)(i.a.mark((function t(){var n,e,a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l();case 2:return n=t.sent,e=window.AudioContext||window.webkitAudioContext||!1,a=new e,t.abrupt("return",u.a.createMeydaAnalyzer({audioContext:a,bufferSize:512,source:a.createMediaStreamSource(n),windowingFunction:"blackman",featureExtractors:["energy","spectralFlatness"]}));case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}));var x=function(){function t(n,e,a){Object(o.a)(this,t),this.canvas=document.createElement("canvas"),this.setWidth(Math.min(window.innerHeight,window.innerWidth)),this.setHeight(this.width),this.setMargin((window.innerHeight-this.height)/2),this.canvas.style="width: ".concat(this.width,"px; height: ").concat(this.height,"px; margin: ").concat(this.margin,";"),this.gl=this.canvas.getContext("webgl",{antialias:!0,depth:!1}),this.program=this.compileShaders(n,e),this.gl.useProgram(this.program),this.numPoints=a,this.useVertexBuffer();var i=document.getElementById("root");i.style="width: ".concat(this.width,"px; height: ").concat(this.height,"px"),i.appendChild(this.canvas)}return Object(s.a)(t,[{key:"setWidth",value:function(t){this.width=t,this.canvas.width=t*devicePixelRatio,this.canvas.style=this.canvas.style+"width: ".concat(t,"px;")}},{key:"setHeight",value:function(t){this.height=t,this.canvas.height=t*devicePixelRatio,this.canvas.style=this.canvas.style+"height: ".concat(t,"px;")}},{key:"setMargin",value:function(t){this.margin=t,this.canvas.style=this.canvas.style+"margin: ".concat(t," auto;")}},{key:"compileShaders",value:function(t,n){var e=this.gl,a=e.createShader(e.VERTEX_SHADER);if(e.shaderSource(a,n),e.compileShader(a),!e.getShaderParameter(a,e.COMPILE_STATUS))throw e.getShaderInfoLog(a);var i=e.createShader(e.FRAGMENT_SHADER);if(e.shaderSource(i,t),e.compileShader(i),!e.getShaderParameter(i,e.COMPILE_STATUS))throw e.getShaderInfoLog(i);var r=e.createProgram();if(e.attachShader(r,a),e.attachShader(r,i),e.linkProgram(r),!e.getProgramParameter(r,e.LINK_STATUS))throw e.getProgramInfoLog(r);return r}},{key:"useVertexBuffer",value:function(){var t=this.gl,n=new Float32Array(2*this.numPoints).map((function(){return 2*Math.random()-1})),e=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,e),t.bufferData(t.ARRAY_BUFFER,n,t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,e);var a=t.getAttribLocation(this.program,"a_position");t.vertexAttribPointer(a,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(a)}},{key:"setUniforms",value:function(t,n,e,a,i){var r=this.gl.getUniformLocation(this.program,"u_a"),o=this.gl.getUniformLocation(this.program,"u_b"),s=this.gl.getUniformLocation(this.program,"u_c"),c=this.gl.getUniformLocation(this.program,"u_d"),h=this.gl.getUniformLocation(this.program,"u_color");this.gl.uniform1f(r,t),this.gl.uniform1f(o,n),this.gl.uniform1f(s,e),this.gl.uniform1f(c,a),this.gl.uniform1f(h,i)}},{key:"draw",value:function(){var t=this.gl;t.drawArrays(t.POINTS,0,this.numPoints)}}]),t}();window.onload=function(){var t=Object(c.a)(i.a.mark((function t(){var n,e,a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return p(!0),devicePixelRatio>1?Math.pow(2,20):Math.pow(2,19),n=new x("\nprecision highp float;\n\nuniform float u_color;\n\nvarying float v_t;\n\nconst float PI = 3.14159265359;\n\nvec3 cubehelix(float x, float y, float z) {\n  float a = y * z * (1.0 - z);\n  float c = cos(x + PI / 2.0);\n  float s = sin(x + PI / 2.0);\n  return vec3(\n    z + a * (1.78277 * s - 0.14861 * c),\n    z - a * (0.29227 * c + 0.90649 * s),\n    z + a * (1.97294 * c)\n  );\n}\n\nvec3 rainbow(float t) {\n  if (t < 0.0 || t > 1.0) t -= floor(t);\n  float ts = abs(t - 0.5);\n  return cubehelix(\n    (360.0 * t - 100.0) / 180.0 * PI,\n    1.5 - 1.5 * ts,\n    u_color - 0.9 * ts\n  );\n}\n\nvoid main() {\n  gl_FragColor = vec4(rainbow(v_t / 4.0 + 0.25), 1.0);\n}\n","\nprecision highp float;\n\nconst float PI = 3.14159265359;\n\nuniform float u_a;\nuniform float u_b;\nuniform float u_c;\nuniform float u_d;\n\nattribute vec2 a_position;\n\nvarying float v_t;\n\nvoid main() {\nfloat x1, x2 = a_position.x;\nfloat y1, y2 = a_position.y;\nfor (int i = 0; i < 8; i++) {\n  x1 = x2, y1 = y2;\n  x2 = sin(u_a * y1) - cos(u_b * x1);\n  y2 = sin(u_c * x1) - cos(u_d * y1);\n}\nv_t = atan(a_position.y, a_position.x) / PI;\ngl_Position = vec4(x2 / 2.0, y2 / 2.0, 0.0, 1.0);\ngl_PointSize = 1.5;\n}\n",Math.pow(2,20)),a=0,requestAnimationFrame((function t(i){var o=0,s=0;if(e){var c=e.get(["energy","spectralFlatness"]);o=c?10*c.energy:0,a+=c?c.energy/2:0,s=c?c.spectralFlatness:0}var h=Math.sin(a+i/1e4)-2,u=Math.floor(a/100)%2===0?[-2,-1.2]:[-2.53,-1.61],l=Object(r.a)(u,2),f=l[0],g=l[1],d=s<.05?2-o:2,m=Math.min(.8,(Math.sin(i/8e3)+1)/2);n.setUniforms(h,f,g,d,m),n.draw(),requestAnimationFrame(t)})),t.prev=5,t.next=8,w();case 8:e=t.sent,t.next=14;break;case 11:t.prev=11,t.t0=t.catch(5),console.log(t.t0);case 14:case"end":return t.stop()}}),t,null,[[5,11]])})));return function(){return t.apply(this,arguments)}}()},7:function(t,n,e){t.exports=e(10)},9:function(t,n,e){}},[[7,1,2]]]);
//# sourceMappingURL=main.f259f9d9.chunk.js.map